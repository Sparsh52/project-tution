{% extends "base.html" %}

{% block start %}
<div style="background-image: url('https://media.istockphoto.com/id/1461630610/photo/group-of-happy-students-checking-results-on-laptop-while-sitting-on-college-campus-concept-of.jpg?s=1024x1024&w=is&k=20&c=hM3MXDo7nbLLfxjpFrYBtp-nnIsnVEBU5pG2lvIIdkg='); background-repeat: no-repeat; background-position: center; background-size: cover; height: 110vh; width: 110vw; position: absolute">
    <div class="container mt-5">
        <form class="col-6 mx-auto card p-3 shadow-lg" action="{% url 'register_student' %}" method="POST" enctype="multipart/form-data">
            <h1 class="card-title display-6" >Student Registration-Page</h1>
            {% csrf_token %}
            <div class="form-group">
                <label for="exampleDataList" class="form-label">Institution Type</label>
                <select class="form-control" id="id_institution_type" name="ins_type" autocomplete="off" required>
                    <option value="University" {% if teacher_type == 'University' %}selected{% endif %}>University</option>
                    <option value="School" {% if teacher_type == 'School' %}selected{% endif %}>School</option>
                </select>
                <div class="form-group" id="semesterField" style="display: none;">
                    <label for="id_semester">Semester</label>
                    <input type="number" class="form-control" name="semester" id="id_semester" min="1" max="8" autocomplete="off" onkeypress="return !(event.charCode == 46)"  default="1">
                </div>

                <div class="form-group" id="standardField" style="display: none;">
                    <label for="id_standard">Standard</label>
                    <input type="number" class="form-control" name="standard" id="id_standard" min="1" max="12" autocomplete="off" onkeypress="return !(event.charCode == 46)" default="1">
                </div>
                <div class="mb-3">
                    <label for="exampleInputEmail1" class="form-label">Institution Name</label>
                    <input type="text" class="form-control" name="institution_name" id="exampleInputEmail1" aria-describedby="emailHelp" autocomplete="off" pattern="[a-zA-Z\s]+" required>
                </div>
                <label for="exampleDataList" class="form-label">Gender</label>
                <select class="form-control" id="id_gender_type" name="gender" autocomplete="off" required>
                    <option value="Male" {% if gender == 'Male' %}selected{% endif %}>Male</option>
                    <option value="Female" {% if gender == 'Female' %}selected{% endif %}>Female</option>
                </select>

            </div>
            <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">Student Image</label>
                <input type='file' name="student_image" class="form-control" accept="image/*">
            </div>
            <div class="form-group">
                <input class="btn btn-danger btn-lg btn-block" type="submit" value="Submit">
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    function toggleFields() {
        var institutionType = document.getElementById("id_institution_type").value;
        var semesterField = document.getElementById("semesterField");
        var standardField = document.getElementById("standardField");
        var semesterInput = document.querySelector('[name="semester"]');
        var standardInput = document.querySelector('[name="standard"]');
        
        if (institutionType === "University") {
            semesterField.style.display = "block";
            standardField.style.display = "none";
            semesterInput.required = true;
            standardInput.required = false;
        } else {
            semesterField.style.display = "none";
            standardField.style.display = "block";
            semesterInput.required = false;
            standardInput.required = true;
        }
    }
    toggleFields();
    document.getElementById("id_institution_type").addEventListener("change", toggleFields);
});
</script>

{% endblock %}